<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><title>error about next/image </title><meta property="og:type" content="website"/><meta property="og:url" content="https://otkruy.github.io/posts/next_image"/><meta property="og:title" content="error about next/image "/><meta property="og:description" content="next,error"/><meta property="og:site_name" content="OTKRyu&#x27;s blog"/><meta property="og:locale" content="ko_KR"/><meta name="next-head-count" content="9"/><link rel="preload" href="/_next/static/css/58a53d4594040cd4.css" as="style"/><link rel="stylesheet" href="/_next/static/css/58a53d4594040cd4.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-69bfa6990bb9e155.js" defer=""></script><script src="/_next/static/chunks/framework-e70c6273bfe3f237.js" defer=""></script><script src="/_next/static/chunks/main-f813a7991d8b5eee.js" defer=""></script><script src="/_next/static/chunks/pages/_app-898c436b230de4c1.js" defer=""></script><script src="/_next/static/chunks/664-fe1f0ac1dd157bd4.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5Bid%5D-bc41664bccf36379.js" defer=""></script><script src="/_next/static/Trodc0c02JvEe1vwOMdZH/_buildManifest.js" defer=""></script><script src="/_next/static/Trodc0c02JvEe1vwOMdZH/_ssgManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><div class="bg-blue-400"><div class="p-5"><nav class="bg-white flex justify-between border rounded my-3"><div class="p-2">OTKRyu</div><div class="flex"><div class="p-2 hover:underline"><a href="/">Home</a></div><div class="p-2 hover:underline"><a href="/posts">Posts</a></div><div class="p-2 hover:underline"><a href="/tags">Tags</a></div><div class="p-2 hover:underline"><a href="/about">About</a></div></div></nav><main><article class="bg-white border rounded my-3 w-full h-full p-5"><h1 class="text-3xl my-3">error about next/image </h1><div class="text-slate-500">Tue Jul 04 2023 19:36:38 GMT+0900 (대한민국 표준시)</div><hr class="my-3"/><div class="prose lg:prose-xl px-2 m-auto my-4 sm:my-16"><h1>next</h1>
<p>next는 react를 csr, ssr 등의 여러 방식으로 취사선택하여 서비스를 제공할 수 있도록 도와주는 복합적인 프레임워크다. 처음 next의 설명을 들었을 때, 이게 어떻게 가능한가 싶었다.
ssr을 하려면 적어도 서버가 있어야되는데, next의 설명에는 서버관련된 코드같은 것들이 거의 나와있지 않기 때문이다.
그래서 처음에는 뭔가 마법같은 기술이 있나하고 기대를 했지만, 실체는 코드를 기반으로 진짜 서버를 만들어서 돌려주는 것이었다.</p>
<h2>next/image</h2>
<p>next/image는 next에서 제공하는 컴포넌트 중 하나이다.
대부분 이미지를 다룰 때, 항상 고민하게 되는 것이 이미지 최적화인데, 이게 쉽지 않은 문제이고 뚜렷한 정답이랄게 없다.
django 서버 만들 때 배웠던 imagekit를 이용하여 업로드될 때부터 화질을 제한해놓는 방식도 있을 수 있고, 요즘같이 반응형 서비스가 많은 경우에는 보이는 화면에 따라 이미지를 각기 사이즈별로 준비해둬야할 수도 있다.
어찌됐건 해결하기 쉽지 않은 문제 중 하나인데, next에서는 image가 어떤 사이즈로 들어갈 건지 명시만 해주면 next/image 컴포넌트를 사용하여 이미지를 조정해주는 기능을 제공한다.
잘 작동한다면 사용자 경험을 유지하면서, 페이지 로드 시간을 줄일 수 있다.</p>
<h2>next/image error</h2>
<p>다만 export를 이용하여 페이지를 배포할 시에 문제가 있다. 이 블로그 같은 경우 github pages를 활용하고 있는데, 사실 github pages는 static 파일을 제공해주는 데에 맞춰져있으므로, next에서 요구하는 빌드 후 서버를 통해 배포하는 것과는 거리가 멀다.
그렇다보니 아래와 같은 에러를 마주할 수 있었다</p>
<div><pre><code>Error: Image Optimization using Next.js&#x26;#39; default loader is not compatible with next export.</code></pre></div>
<p>말 그대로 static한 파일로 만들어서 제공하는 export로는 next/image에 사용되는 기본 image loader로는 이미지 최적화가 불가능하다는 것이다.</p>
<h2>해결법</h2>
<p>왜 default loader로는 불가능할까
next 공식문서에 보면 그 해답이 나와있다.
next도 webpack처럼 각기 파일 형태에 따라 loader를 사용하여 처리하는데, next가 기본적으로 사용하는 default loader는 build 시간을 단축하기 위해, 빌드 때 미리 최적화를 하는 것이 아니라, 그 이미지가 실제로 필요할 때 최적화하기 때문이다.</p>
<p>그래서 결국 이를 해결하기 위한 방법은 몇 가지 있는데 아래와 같다.</p>
<ol>
<li>next/image 컴포넌트를 사용하지 않는다.</li>
<li>next의 default loader가 아닌 build시에 최적화를 할 수 있는 다른 loader를 사용한다.</li>
<li>default loader가 제대로 일할 수 있는 배포환경으로 변경한다.</li>
</ol>
<p>홈페이지에 사용하는 이미지가 많을 경우 1번은 답이 아닐 것이고 2, 3번을 고민해야하는 게 맞겠지만, 현재 이 블로그는 이미지라고는 로고 몇 개가 끝이기 때문에, 그냥 next/image 컴포넌트 쓰는 것을 포기했다.</p>
<p>대부분 다른 사람들을 2번은 방법을 많이 쓰는 것으로 보인다.
사실 이 에러 관련한 글은 많이 있는데, 이유까지 써놓은 글이 잘 없어서 포스트로 한 번 작성해봤다.</p>
<h2>출처</h2>
<p>더 자세한 정보를 원한다면 공식문서에 에러와 그 원인 및 해결방법까지 잘 써져 있다.
<a href="https://nextjs.org/docs/api-reference/next/image">https://nextjs.org/docs/api-reference/next/image</a></p>
</div></article></main><footer class="bg-white flex justify-center border rounded my-2"><div class="m-2"><a href="mailto:appn12@gmail.com"><img src="/images/email_icon.png" width="30" height="30"/></a></div><div class="m-2"><a href="https://github.com/OTKRyu"><img src="/images/GitHub-Mark-32px.png" width="30" height="30"/></a></div></footer></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"id":"next_image","postData":{"id":"next_image","contentHtml":"\u003ch1\u003enext\u003c/h1\u003e\n\u003cp\u003enext는 react를 csr, ssr 등의 여러 방식으로 취사선택하여 서비스를 제공할 수 있도록 도와주는 복합적인 프레임워크다. 처음 next의 설명을 들었을 때, 이게 어떻게 가능한가 싶었다.\r\nssr을 하려면 적어도 서버가 있어야되는데, next의 설명에는 서버관련된 코드같은 것들이 거의 나와있지 않기 때문이다.\r\n그래서 처음에는 뭔가 마법같은 기술이 있나하고 기대를 했지만, 실체는 코드를 기반으로 진짜 서버를 만들어서 돌려주는 것이었다.\u003c/p\u003e\n\u003ch2\u003enext/image\u003c/h2\u003e\n\u003cp\u003enext/image는 next에서 제공하는 컴포넌트 중 하나이다.\r\n대부분 이미지를 다룰 때, 항상 고민하게 되는 것이 이미지 최적화인데, 이게 쉽지 않은 문제이고 뚜렷한 정답이랄게 없다.\r\ndjango 서버 만들 때 배웠던 imagekit를 이용하여 업로드될 때부터 화질을 제한해놓는 방식도 있을 수 있고, 요즘같이 반응형 서비스가 많은 경우에는 보이는 화면에 따라 이미지를 각기 사이즈별로 준비해둬야할 수도 있다.\r\n어찌됐건 해결하기 쉽지 않은 문제 중 하나인데, next에서는 image가 어떤 사이즈로 들어갈 건지 명시만 해주면 next/image 컴포넌트를 사용하여 이미지를 조정해주는 기능을 제공한다.\r\n잘 작동한다면 사용자 경험을 유지하면서, 페이지 로드 시간을 줄일 수 있다.\u003c/p\u003e\n\u003ch2\u003enext/image error\u003c/h2\u003e\n\u003cp\u003e다만 export를 이용하여 페이지를 배포할 시에 문제가 있다. 이 블로그 같은 경우 github pages를 활용하고 있는데, 사실 github pages는 static 파일을 제공해주는 데에 맞춰져있으므로, next에서 요구하는 빌드 후 서버를 통해 배포하는 것과는 거리가 멀다.\r\n그렇다보니 아래와 같은 에러를 마주할 수 있었다\u003c/p\u003e\n\u003cdiv\u003e\u003cpre\u003e\u003ccode\u003eError: Image Optimization using Next.js\u0026#x26;#39; default loader is not compatible with next export.\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003e말 그대로 static한 파일로 만들어서 제공하는 export로는 next/image에 사용되는 기본 image loader로는 이미지 최적화가 불가능하다는 것이다.\u003c/p\u003e\n\u003ch2\u003e해결법\u003c/h2\u003e\n\u003cp\u003e왜 default loader로는 불가능할까\r\nnext 공식문서에 보면 그 해답이 나와있다.\r\nnext도 webpack처럼 각기 파일 형태에 따라 loader를 사용하여 처리하는데, next가 기본적으로 사용하는 default loader는 build 시간을 단축하기 위해, 빌드 때 미리 최적화를 하는 것이 아니라, 그 이미지가 실제로 필요할 때 최적화하기 때문이다.\u003c/p\u003e\n\u003cp\u003e그래서 결국 이를 해결하기 위한 방법은 몇 가지 있는데 아래와 같다.\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003enext/image 컴포넌트를 사용하지 않는다.\u003c/li\u003e\n\u003cli\u003enext의 default loader가 아닌 build시에 최적화를 할 수 있는 다른 loader를 사용한다.\u003c/li\u003e\n\u003cli\u003edefault loader가 제대로 일할 수 있는 배포환경으로 변경한다.\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003e홈페이지에 사용하는 이미지가 많을 경우 1번은 답이 아닐 것이고 2, 3번을 고민해야하는 게 맞겠지만, 현재 이 블로그는 이미지라고는 로고 몇 개가 끝이기 때문에, 그냥 next/image 컴포넌트 쓰는 것을 포기했다.\u003c/p\u003e\n\u003cp\u003e대부분 다른 사람들을 2번은 방법을 많이 쓰는 것으로 보인다.\r\n사실 이 에러 관련한 글은 많이 있는데, 이유까지 써놓은 글이 잘 없어서 포스트로 한 번 작성해봤다.\u003c/p\u003e\n\u003ch2\u003e출처\u003c/h2\u003e\n\u003cp\u003e더 자세한 정보를 원한다면 공식문서에 에러와 그 원인 및 해결방법까지 잘 써져 있다.\r\n\u003ca href=\"https://nextjs.org/docs/api-reference/next/image\"\u003ehttps://nextjs.org/docs/api-reference/next/image\u003c/a\u003e\u003c/p\u003e\n","title":"error about next/image ","date":"2022-10-12","tags":["next","error"]}},"__N_SSG":true},"page":"/posts/[id]","query":{"id":"next_image"},"buildId":"Trodc0c02JvEe1vwOMdZH","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>